<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Snoopy sweet snacks</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #f0f0f0;
    font-family: "Gill Sans", Calibri, sans-serif;
  }
  canvas {
    display: none;
    background: #000;
  }
  .contenedor {
    width: 400px;
  }
  .envoltura-sobre {
    position: relative;
    background-color: #d8a0f0;
    box-shadow: 0 0 40px rgba(0,0,0,0.2);
    border-radius: 15px;
  }
  .sobre {
    position: relative;
    width: 100%;
    height: 300px;
  }
  .carta {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100%;
    background-color: #fff;
    text-align: center;
    padding: 20px;
    border-radius: 10px;
  }
  .contenido {
    color: #333;
    font-size: 14px;
    text-align: left;
    line-height: 1.4em;
    height: 80%;
    overflow-y: auto;
    margin-bottom: 10px;
  }
  .btn-aceptar {
    background: #a020f0;
    color: white;
    border: none;
    padding: 8px 20px;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
  }
  .btn-aceptar:hover { background: #8000c0; }

  /* Controles t치ctiles */
  #mobileControls {
    display: none;
    position: fixed;
    bottom: 80px; /* m치s arriba */
    width: 100%;
    justify-content: space-between;
    padding: 0 50px;
    z-index: 1000;
  }
  #mobileControls button {
    width: 90px;   /* un poco m치s grandes */
    height: 90px;
    font-size: 36px;
    border-radius: 10px;
    border: none;
    background: #a020f0;
    color: white;
  }
  #mobileControls button:active { background: #8000c0; }
</style>
</head>
<body>

<!-- Pantalla de reglas -->
<div id="intro" class="contenedor">
  <div class="envoltura-sobre">
    <div class="sobre">
      <div class="carta">
        <div class="contenido">
          <h2>游눏 Bienvenido a Snoopy sweet snacks</h2>
          <p>
            游꿡 Reglas del juego:<br>
            - En PC mueve a Snoopy con las flechas 拘勇 俱뫮잺.<br>
            - Atrapa las fresas 游꼡 para ganar puntos.<br>
            - Atrapa las cerezas 游 para recuperar una vida (m치x. 5 vidas).<br>
            - Si dejas caer 5 frutas, pierdes el juego 游눖.
          </p>
          <p style="text-align:center; margin-top:15px; font-weight:bold;">
            游꿀 춰Ahora a divertirse! 游꿀 <br>
            <span style="font-size:14px; color:#555;">Desarrollado con cari침o por Pedro Cauich</span>
          </p>
        </div>
        <button class="btn-aceptar" id="btnStart">Aceptar</button>
      </div>
    </div>
  </div>
</div>

<!-- Canvas del juego -->
<canvas id="gameCanvas"></canvas>

<!-- Controles t치ctiles -->
<div id="mobileControls">
  <button id="leftBtn">拘勇</button>
  <button id="rightBtn">俱뫮잺</button>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Detectar m칩vil
function isMobile() { return /Mobi|Android/i.test(navigator.userAgent); }

// --- IM츼GENES ---
const backgroundImg = new Image();
backgroundImg.src = "f1.jpg";
const snoopyImg = new Image();
snoopyImg.src = "i1.png";
const cherryImg = new Image();
cherryImg.src = "i2.jpeg";
const strawberryImg = new Image();
strawberryImg.src = "i3.jpeg";

// --- VARIABLES ---
let player, foods, keysPressed, score, misses, lastSpawn;
const maxFoods = 2, maxMisses = 5;
const foodSpeedBase = 3, foodSpeedMax = 8, spawnIntervalBase = 1000, spawnIntervalMin = 400;
let foodSpeed = foodSpeedBase, spawnInterval = spawnIntervalBase;

// Ajuste canvas
function resizeCanvas() {
  if(isMobile()){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  } else {
    canvas.width = 700;
    canvas.height = 500;
  }
}

// Inicializa el juego
function resetGame(){
  resizeCanvas();
  const scale = canvas.width / 700;
  player = { 
    width: 80*scale, 
    height: 80*scale, 
    speed: 10*scale,
    x: canvas.width/2 - (80*scale)/2,
    y: canvas.height - (150*scale) // Snoopy m치s arriba
  };
  foods = [];
  keysPressed = { left:false, right:false };
  score = 0;
  misses = 0;
  lastSpawn = 0;
}

// Teclado
document.addEventListener("keydown", e=>{
  if(e.code==="ArrowLeft") keysPressed.left=true;
  if(e.code==="ArrowRight") keysPressed.right=true;
});
document.addEventListener("keyup", e=>{
  if(e.code==="ArrowLeft") keysPressed.left=false;
  if(e.code==="ArrowRight") keysPressed.right=false;
});

// Controles t치ctiles
if(isMobile()){
  document.getElementById("mobileControls").style.display="flex";
  document.getElementById("leftBtn").addEventListener("touchstart", ()=>keysPressed.left=true);
  document.getElementById("leftBtn").addEventListener("touchend", ()=>keysPressed.left=false);
  document.getElementById("rightBtn").addEventListener("touchstart", ()=>keysPressed.right=true);
  document.getElementById("rightBtn").addEventListener("touchend", ()=>keysPressed.right=false);
}

// Colisi칩n
function collide(a,b){
  return(a.x<b.x+b.width && a.x+a.width>b.x && a.y<b.y+b.height && a.y+a.height>b.y);
}

// Dificultad din치mica
function updateDifficulty(){
  foodSpeed = Math.min(foodSpeedBase + score*0.2, foodSpeedMax);
  spawnInterval = Math.max(spawnIntervalMin, spawnIntervalBase - score*15);
  foodSpeed += Math.sin(Date.now()/500)*0.5;
}

// Bucle principal
function gameLoop(timestamp){
  if(keysPressed.left && player.x>0) player.x -= player.speed;
  if(keysPressed.right && player.x+player.width<canvas.width) player.x += player.speed;

  updateDifficulty();

  if(!lastSpawn) lastSpawn = timestamp;
  if(timestamp-lastSpawn>spawnInterval && foods.length<maxFoods){
    let type = Math.random()<0.2?{img:cherryImg,life:true}:{img:strawberryImg,life:false};
    let foodSize = 40*(canvas.width/700);
    foods.push({
      x: Math.random()*(canvas.width-foodSize),
      y: -foodSize,
      width: foodSize,
      height: foodSize,
      image: type.img,
      life: type.life
    });
    lastSpawn = timestamp;
  }

  foods.forEach(f => f.y += foodSpeed);
  foods = foods.filter(f=>{
    if(collide(player,f)){
      score++;
      if(f.life) misses = Math.max(0, misses-1);
      return false;
    }
    if(f.y>canvas.height){ misses++; return false; }
    return true;
  });

  if(misses>=maxMisses){
    alert("游눖 Game Over! Puntos: "+score);
    resetGame();
  }

  // --- DIBUJAR ---
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(backgroundImg,0,0,canvas.width,canvas.height);
  ctx.drawImage(snoopyImg, player.x, player.y, player.width, player.height);
  foods.forEach(f => ctx.drawImage(f.image, f.x, f.y, f.width, f.height));

  ctx.fillStyle="#6a0dad";
  ctx.font = `${28*(canvas.width/700)}px Comic Sans MS`;
  ctx.textAlign="center";
  ctx.fillText("Snoopy sweet snacks", canvas.width/2, 35*(canvas.width/700));

  ctx.textAlign="left";
  ctx.fillStyle="black";
  ctx.font = `${20*(canvas.width/700)}px Arial`;
  ctx.fillText("Puntos: "+score, 10, 65*(canvas.width/700));
  ctx.fillText("Vidas: "+(maxMisses-misses), 10, 90*(canvas.width/700));

  requestAnimationFrame(gameLoop);
}

// Inicio
document.getElementById("btnStart").addEventListener("click", ()=>{
  document.getElementById("intro").style.display="none";
  canvas.style.display="block";
  resetGame();
  requestAnimationFrame(gameLoop);
});

// Ajuste al redimensionar
window.addEventListener("resize", resetGame);
</script>
</body>
</html>










